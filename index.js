const express = require('express')
const port = process.env.PORT
const path = require('path')

const app = require('./server/src/app')
// IMPORT ROUTERS ↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓
// const userRouter = require('./server/src/routers/user')
// const gameRouter = require('./server/src/routers/game')
// const arenaRouter = require('./server/src/routers/arena')
// const arbiterScheduleRouter = require('./server/src/routers/arbiter/schedule')
// const arbiterProfileRouter = require('./server/src/routers/arbiter/profile')
// const horizonScheduleRouter = require('./server/src/routers/horizon/schedule')
// const arbiterPaymentsRouter = require('./server/src/routers/arbiter/payments')

//  ↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑

app.use(express.json())

//USE ROUTERS HERE ↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓
// app.use(userRouter)
// app.use(gameRouter)
// app.use(arenaRouter)
// app.use(arbiterScheduleRouter)
// app.use(arbiterProfileRouter)
// app.use(horizonScheduleRouter)
// app.use(arbiterPaymentsRouter)
//   ↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑
if (process.env.NODE_ENV === 'production') {
    
    // Serve any static files
    app.use(express.static(path.join(__dirname, 'client/build')));
      
    // Handle React routing, return all requests to React app
    app.get('*', function(req, res) {
        res.sendFile(path.join(__dirname, 'client/build', 'index.html'));
    });
}
app.listen(port, () => {
    console.log("Server is listening on port: " + port)
})  